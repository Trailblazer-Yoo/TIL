# TIL(Today I Learned)

___

> Jan/20th/2022_Multi campus_유선종 Day9
## Pandas 2일차
### 1. Data Fame과 관련된 명령어들
- 지지난 시간에 우리는 판다스를 이용해서 행렬 표현을 익혔다. 벡터 표현은 Series Data, 행렬 표현은 Data Frame으로 표현했다. 벡터표현은 기존의 파이썬의 인덱싱과 다를바가 없지만, 행렬은 행과 열을 동시에 표현해야 하기 때문에 다르게 코딩해야 한다. 어렵지는 않다.
___
#### 1. loc & iloc(행표현)
 - loc은 행과 열이 오브젝 데이터(문자열)일 경우에 사용하고, iloc은 숫자로 인덱싱할 경우에 사용한다.
```python
import pandas as pd
data = {'이름' : ['서준','우현','인아'], '수학' : [90,80,70], '영어' : [98,89,95], '음악' : [85,95,100], '체육' : [100,90,90]}
df = pd.DataFrame(data)
```
위의 data 딕셔너리 자료를 데이터 프레임으로 표현하면 다음과 같다.
|      | 이름 | 수학 | 영어 | 음악 | 체육 |
| :--: | :--: | :--: | :--: | :--: | :--: |
|  0   | 서준 |  90  |  98  |  85  | 100  |
|  1   | 우현 |  80  |  89  |  95  |  90  |
|  2   | 인아 |  70  |  95  | 100  |  90  |
 - 1. 여기서 행 데이터는 0,1,2의 위치를 받는 인덱싱 자료이므로 iloc을 사용해야 한다. 만약, 1행을 추출하고 싶다면 다음과 같이 입력해야 한다.   `df.iloc[0]`
 - 2. 만약, 문자 데이터에 사용하는 `df.loc[0]`을 사용하면 1행이 출력이 될까? 정답은 출력이 되지 않는다. 행 데이터에 포함되지 않는 데이터들은 값을 갖고있기 때문에 인덱싱 자료로 사용할 수 없다.    즉, 서준이 포함되어 있는 행을 추출하고 싶다고 해서 `df.loc['서준']`을 입력하면 오류만 생길 뿐이다.
 - 3. 만약, 0이 있는 행 데이터에 서준이 들어가있다면 `df.loc['서준']`을 사용할 경우 1행이 출력이 된다.
<img src="https://user-images.githubusercontent.com/97590480/150320600-5c0a3c42-9a31-4f90-a922-8986561a6348.png">

> 1행을 출력할경우 다음과 같이 나온다.
 - 4. 만약 1행과 2행을 출력하고 싶다면 `df.iloc[:1]` or `df.iloc[0:1]` or `df.iloc[0,1]` 등으로 표현해주자.
___
#### 2. 열표현
- 행을 표현할때 loc & iloc을 사용했다면 열은 특정 명령어가 필요가 없다. 추측하건데 딕셔너리형도 열을 기준으로 작성되므로 판다스가 열을 기준으로 행렬을 표현하는 것으로 보인다.
- 위의 data 딕셔너리 자료를 그대로 사용해보자.
- 1. 만약 수학 데이터를 추출하고 싶다면, `df.['수학']` or `df.수학`이라고 입력하면 된다. 행 표현에 비해서 직관적으로 쉽다는 것을 알 수 있다.
- 2. 그렇다면 수학과 영어 데이터를 추출하고 싶다면 `df[['수학','영어']]`를 입력하자. 대괄호가 두 번 들어가야 한다는 것을 꼭 기억하자.
___
#### 3. 원소선택
- 그렇다면 우리가 3행 4열에 있는 데이터를 추출하고자 한다면 어떻게 코딩해야 할까? 이럴때는 loc & iloc을 사용해야 한다.
- 만약, 3행 4열의 데이터를 추출하고자 한다면 `df.loc[2, '음악']`을 입력하자. 문자가 포함되어 있다면 loc이다.
- 그렇다면 서준의 영어,음악 데이터를 추출하고 싶다면 `df.loc[0, ['영어', '음악']]`을 입력하자.
- 반대로 서준과 우현의 수학 데이터를 추출하고 싶다면 `df.loc[0:1, '수학']` or `df.loc[[0,1], '수학']`을 입력하면 된다.
___
#### 4. 그외의 명령어들
- 1. 위의 행렬에서 이름 열을 행 인덱스로 설정하고 싶다면 `df.set_index(['이름'])` or `df.set_index('이름')`을 입력하면 된다.

| 이름 | 수학 | 영어 | 음악 | 체육 |
| :--: | :--: | :--: | :--: | :--: |
| 서준 |  90  |  98  |  85  | 100  |
| 우현 |  80  |  89  |  95  |  90  |
| 인아 |  70  |  95  | 100  |  90  |

> 이렇게 바뀐다.
- 2. 만약 행 인덱스를 데이터의 행보다 많이 설정할 경우
```python
index = ['서준','우현','인아','누구','누구']
df.reindex(index)
```
위의 코드를 실행하면 다음과 같이 나온다.

| 이름 | 수학 | 영어 | 음악 | 체육 |
| :--: | :--: | :--: | :--: | :--: |
| 서준 |  90  |  98  |  85  | 100  |
| 우현 |  80  |  89  |  95  |  90  |
| 인아 |  70  |  95  | 100  |  90  |
| 누구 |  NaN |  NaN |  NaN |  NaN |
| 누구 |  NaN |  NaN |  NaN |  NaN |

> 이렇게 나올 경우 NaN은 아무런 값을 가지지 않는다는 오류 메세지이다. 이 상태로 데이터를 분석하면 잘못된 분석이 나오기 때문에 바꿔줘야 한다.
- 따라서 `df.reindex(index, fill_value = 0)`으로 입력하면 NaN값이 0으로 채워진다.
- 3. `df.sort_indext(ascending = True)`를 하면 오름차순으로 정렬이 된다. False를 하면 내림차순이 된다.
- 4. Data Frame은 사칙연산이 가능한데, 행렬의 연산과 비슷하다.

| 이름 | 수학 | 국어 | 영어 |      | 수학 | 국어 |      | 수학 | 국어 | 영어 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 서준 |  90  |  98  |  85  |      |  50  |  20  |      | 140  | 118  | NaN  |
| 우현 |  80  |  89  |  95  |  +   |  70  |  90  |  =   | 150  | 179  | NaN  |
| 인아 |  70  |  95  | 100  |      |  80  | 100  |      | 150  | 195  | NaN  |

> 다음과 같은 3 by 3 행렬과 3 by 2 행렬의 합을 구하면 선형대수학에서는 구할 수 없다. 행렬의 합은 동일한 크기의 행렬끼리 합만이 정의되는데, 판다스에서는 NaN값으로 그 표현을 대신한다. 나머지 사칙연산도 동일한다.
- 5. 전치행렬은 `df.Transpose()` or `df.T`를 사용한다.
- 6. 데이터의 앞에서 5행, 뒤에서 5행을 살펴보는 명령어는 `df.head()`, `df.tail()` 이다.
- 7. 행렬의 행의 갯수와 열의 갯수를 튜플로 반환하는 명령어는 `df.shaep`이다. 열의 갯수에 맞는 데이터 상자를 만든다거나 정방행렬을 만드는 등 유용한 경우가 많다.
- 8. 데이터의 자료형을 확인하고 싶다면 `df.dtypes`를 입력하자.
- 9. 기술통계에 관한 내용이다. 자주 사용되는 기술 통계 정보를 요약된 형태로 보고 싶다면 `df.describe()`를, 다 알고 싶으면 `df.describe(include = 'all')`을 입력하면 된다.
- 10. 기술통계에서 볼 수 있지만 따로 평균값이나 중간값이 필요한 경우 `df.mean()`, `df.median()`등 기술통계 이름을 .뒤에 입력하면 된다.   아직 기초만 다루기 때문에 이정도에서 끝낸다. 더 자세한 명령어들은 나중에 통계를 이용해서 데이터 분석을 할 때 배울테니 그때 또 적도록 하겠다.