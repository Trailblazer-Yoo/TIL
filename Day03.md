# TIL(Today I Learned)

___
> Jan/14th/2022_Multi campus_유선종 Day3
## Git 2일차
- TIL_Day02에 이어서 깃에 대한 내용을 이어서 해보고자 한다. 그 중에서 reset 기능에 대해 우선 알아보자.
  ## 1. reset
   - 리셋 기능은 과거의 기록을 가져오는 기능을 말한다. 내가 열심히 보정해서 만든 사진이 며칠 뒤에는 마음에 안들 경우도 종종 있지 않은가? 그럴때 우리는 리셋을 통해 보정 전 사진으로 돌아갈 수 있다.
   - 내가 예전에 포토샵 작업을 할때에 우선 했던 작업은 원본 사진을 복제하고 숨김하는 것이였다. 사진을 보정하고 가공하는 포토샵의 특성상 원본에 대한 복제는 필수이고, 작업이 어느정도 진행됐는지를 알 수 있는 중요한 작업이다. 여기서 reset은 이러한 포토샵의 원본 복사보다 더욱 강력한 기능이다. 과거의 기록으로 돌아갔어도 현재의 기록으로 되돌아갈 수 있다.
   ### reset의 단축키좀 알려줄래?
     - reset의 단축키는 다음과 같다.    `git reset --옵션 커밋ID`
     - 여기서 옵션은 soft, mixed, hard가 있다. 그리고 커밋 ID는 우리가 최종적으로 찍은 커밋의 고유한 ID를 의미한다. 여기서 다시 한 번 깃의 3단계 저장소를 꺼낼 필요가 있다.
    > Day02에서 git은 working directory -> staging area -> repository 의 3단계로 저장한다고 설명했다. 여기서 working directory는 포즈를 취하는 것과 비슷하고 staging area는 사진을 보정하는 작업, repository는 최종적으로 내가 인스타에 올릴 사진을 결정하는 작업이랑 비슷하다고 설명했다.
     - 옵션은 각 단계와 관련이 있다. 다음 표를 참고하자.
    |       | working directory | staging area | Repository |
    | ----- | ----------------- | ------------ | ---------- |
    | Soft  | O                 | O            | X          |
    | Mixed | O                 | X            | X          |
    | Hard  | X                 | X            | X          |
   - 여기서 X는 현재 작업이 삭제된다는 의미이다. 즉 soft는 commit의 내용이 삭제되지만, staging area에 저장되어 있는 자료가 남아있기 때문에 만약 리셋을 했는데 현재의 내용이 더 마음에 들면 commit으로 저장만 해주면 되기 때문에 soft하게 되돌아간 것을 말한다.
   -  Mixed는 Repository뿐만 아니라 staging area에 있는 기록도 삭제된다. 만약 옵션을 까먹고 입력한다면 mixed로 입력이 될 것이다.
   -  마지막으로 Hard는 working directory마저 삭제되기 때문에 내 현재 기록이 아예 날아갈 수 있다. ~~웬만하면 Hard는 아이스크림만 먹자.~~
   ### 그러면 reset의 예시좀 알려줘!
    <img width = "80%" src="https://user-images.githubusercontent.com/97590480/149522239-4f65800c-4007-40a5-b827-f9aae98a6ba3.png">   

   - 여기 보면 노란색으로 쌓인 수많은 commit들을 볼 수 있다. 저것들은 깃헙에 내가 생각한대로 안올라가서 애를 먹은 흔적들이다.
   > 저 기록들을 보고 싶다면 `git log --oneline`을 입력하면 된다.
    - 저기 중에서 내가 Day2_1 commit으로 돌아가고 싶다면 `git reset --mixed 9c11d47`을 입력하면 된다.

    <img width = "80%" src="https://user-images.githubusercontent.com/97590480/149523046-ad0471bf-8b50-452b-a91c-f0a42b5f2ace.png">

 > 9c11d47 옆에 head가 생긴 것을 볼 수 있다. head는 현재 내가 있는 커밋을 의미하므로 reset을 통해 제대로 과거로 돌아왔다는 것을 알 수 있다.

   ### 도와줘! 실수로 다른 커밋으로 리셋했어!
    - `git log --oneline`을 입력하여 봤는데 실수로 원래 내가 되돌아가려했던 커밋이 사라졌다면 기록을 보며 좌절하지 말자. `git reflog`를 입력하면 삭제했던 내 커밋들이 다시 나오는 것을 볼 수 있다.
    - 기억하자. 보정하며 만든 사진은 지워지지 않는다. __절대 커밋은 사라지지 않는다.__
    > 만약 깃헙에 커밋들이 그대로 있고 reset을 했다면 절대로 git push 하지 말자. 로컬의 버전과 리모트의 버전이 맞지 않아서 에러가 발생한다. pull을 이용해서 맞춰주거나 다시 reset으로 되돌아가자.
  ## 2. revert
    - reset과 비슷하지만 revert는 다른 개념이다. reset은 과거의 커밋으로 되돌아가기 때문에 그 커밋보다 나중에 쓰여진 커밋들은 사라지지만 ~~겉보기에~~, revert는 과거로 돌아가는 커밋을 새로 쌓아올린다고 생각하면 된다. 즉, 포토샵에서 숨겨놨던 원본 사진을 맨 상위 레이어로 올려놓는다고 보면 된다.
    - 단축키는 `git revert 커밋 ID`이다. reset이 귀찮다면 그냥 revert로 새로운 원본 레이어를 쌓자.
 